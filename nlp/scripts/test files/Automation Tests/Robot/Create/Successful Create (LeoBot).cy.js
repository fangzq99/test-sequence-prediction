import { uuid } from 'uuidv4'
import * as robotCreate from '../../../../support/Automation Tests Commands/Robot Commands/robotCreateCommands.js'
import { deleteAutoGeneratedRobots } from '../../../../support/generalCommands.js'
import { baseURL, robotFamilyTypes } from '../../../../support/Region Constants/constants.js'
import { robotCreateUsers } from '../../../../support/Region Constants/userPrivileges.js'


context('Robot tests (Create)', () => {
    robotCreateUsers.forEach(user => {
        context(user.role, () => {
            beforeEach(() => {
                robotCreate.robotCreateBeforeEach(baseURL, user.username, user.password, user.role)
            })
            it("Bulk create LeoScrub", () => {
                let uuidAutoGenLeoBotArray = []
                for (let i = 0; i < 2; i++) {
                    uuidAutoGenLeoBotArray.push('AutoGenLeoScrub' + uuid())
                }
                cy.task('log', 'Created an array of robots to create: ' + uuidAutoGenLeoBotArray)

                robotCreate.createSameFamilyRobots(robotFamilyTypes['leobot']['familyName'], robotFamilyTypes['leobot']['types']['scrub'], uuidAutoGenLeoBotArray)

                deleteAutoGeneratedRobots(user.role, uuidAutoGenLeoBotArray)
            })
            it("Bulk create LeoVac", () => {
                let uuidAutoGenLeoBotArray = []
                for (let i = 0; i < 2; i++) {
                    uuidAutoGenLeoBotArray.push('AutoGenLeoVac' + uuid())
                }
                cy.task('log', 'Created an array of robots to create: ' + uuidAutoGenLeoBotArray)

                robotCreate.createSameFamilyRobots(robotFamilyTypes['leobot']['familyName'], robotFamilyTypes['leobot']['types']['vac'], uuidAutoGenLeoBotArray)

                deleteAutoGeneratedRobots(user.role, uuidAutoGenLeoBotArray)
            })
            it("Bulk create LeoMop", () => {
                let uuidAutoGenLeoBotArray = []
                for (let i = 0; i < 2; i++) {
                    uuidAutoGenLeoBotArray.push('AutoGenLeoMop' + uuid())
                }
                cy.task('log', 'Created an array of robots to create: ' + uuidAutoGenLeoBotArray)

                robotCreate.createSameFamilyRobots(robotFamilyTypes['leobot']['familyName'], robotFamilyTypes['leobot']['types']['mop'], uuidAutoGenLeoBotArray)

                deleteAutoGeneratedRobots(user.role, uuidAutoGenLeoBotArray)
            })
            it("Bulk create LeoPull", () => {
                let uuidAutoGenLeoBotArray = []
                for (let i = 0; i < 2; i++) {
                    uuidAutoGenLeoBotArray.push('AutoGenLeoPull' + uuid())
                }
                cy.task('log', 'Created an array of robots to create: ' + uuidAutoGenLeoBotArray)

                robotCreate.createSameFamilyRobots(robotFamilyTypes['leobot']['familyName'], robotFamilyTypes['leobot']['types']['pull'], uuidAutoGenLeoBotArray)

                deleteAutoGeneratedRobots(user.role, uuidAutoGenLeoBotArray)
            })
        })
    })
})
